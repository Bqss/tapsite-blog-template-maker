<!-- Hero Section -->
<section class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">Explore Amazing Travel Stories</h1>
    <p class="text-xl opacity-90 mb-8">Discover destinations, get travel tips, and find inspiration for your next adventure</p>
    <div class="flex justify-center">
      <div class="bg-white/10 backdrop-blur-sm rounded-lg p-1 flex items-center max-w-md w-full">
        <input type="text" placeholder="Search destinations or travel tips..." class="bg-transparent text-white placeholder-white/70 px-4 py-2 flex-1 outline-none">
        <button class="bg-white text-blue-600 px-4 py-2 rounded-md font-medium hover:bg-gray-100 transition-colors">
          🔍 Search
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Filter Section -->
<section class="bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-wrap gap-4 justify-center" id="travel-filter"></div>
    <script>
    (function(){const container=document.getElementById('travel-filter');if(!container) return;const icons={'Adventure':'🏔️','Cultural':'🎭','Luxury':'✨','Budget':'💰','Solo Travel':'🎒','Family':'👨‍👩‍👧‍👦'};async function load(){try{const res=await fetch('/api/blog/categories');if(!res.ok) throw new Error();const cats=await res.json();container.innerHTML=`<a href='/posts' class='bg-blue-600 text-white px-6 py-2 rounded-full font-medium'>All Posts</a>`+cats.map(c=>`<a href='/category/${encodeURIComponent(c.name)}' class='bg-white text-gray-700 px-6 py-2 rounded-full font-medium hover:bg-gray-100 transition-colors border flex items-center space-x-1'><span>${icons[c.name]||'🏷️'}</span><span>${c.name}</span></a>`).join('');}catch(e){console.error(e);} }document.addEventListener('DOMContentLoaded',load);})();
    </script>
  </div>
</section>
<!-- Destination Quick Links removed -->

<!-- Main Content -->
<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="flex justify-between items-center mb-8">
    <h2 class="text-3xl font-bold text-gray-900">Latest Travel Stories</h2>
    <div class="flex items-center space-x-4">
      <select class="border border-gray-300 rounded-lg px-4 py-2 bg-white">
        <option>Sort by Latest</option>
        <option>Sort by Popular</option>
        <option>Sort by Read Time</option>
      </select>
    </div>
  </div>

  <!-- Articles Grid -->
  <div id="posts-loading" class="flex justify-center py-12">
    <div class="inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"></div>
  </div>
  <div id="posts-error" class="text-center py-12 hidden"><p class="text-red-500">Failed to load stories.</p></div>
  <div id="posts-empty" class="text-center py-12 hidden"><p class="text-gray-500">No stories found.</p></div>
  <div id="posts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 hidden">
    <!-- Article 1 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1552465011-b4e21bf6e79a?w=800&h=600&fit=crop" alt="Southeast Asia Backpacking" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium">Backpacking</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">💰 $30-50/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">🌏 Southeast Asia</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 15 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Ultimate Guide to Backpacking Through Southeast Asia</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Complete travel guide for backpacking through Thailand, Vietnam, Cambodia, and Laos on a budget with insider tips.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face" alt="Sarah Adventure" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">Sarah Adventure</span>
          </div>
          <span class="text-sm text-gray-500">Dec 15, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/ultimate-guide-backpacking-southeast-asia" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>

    <!-- Article 2 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1516426122078-c23e76319801?w=800&h=600&fit=crop" alt="Kenya Safari" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium">Safari</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">✨ $500-1000/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">🦁 Kenya</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 12 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Luxury Safari Experience in Kenya: Masai Mara Wildlife Adventure</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Experience the ultimate luxury safari in Kenya's Masai Mara with exclusive lodges, wildlife encounters, and cultural experiences.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Michael Explorer" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">Michael Explorer</span>
          </div>
          <span class="text-sm text-gray-500">Dec 14, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/luxury-safari-experience-kenya-masai-mara" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>

    <!-- Article 3 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop" alt="Iceland Adventure" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-cyan-600 text-white px-3 py-1 rounded-full text-sm font-medium">Adventure</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">🏔️ $150-250/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">❄️ Iceland</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 10 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Hidden Gems of Iceland: Off-the-Beaten-Path Adventures</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Discover Iceland's secret locations away from tourist crowds, including hidden waterfalls, remote hot springs, and dramatic landscapes.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face" alt="Emma Wanderer" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">Emma Wanderer</span>
          </div>
          <span class="text-sm text-gray-500">Dec 13, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/hidden-gems-iceland-off-beaten-path-adventures" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>

    <!-- Article 4 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1528181304800-259b08848526?w=800&h=600&fit=crop" alt="Japan Culture" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium">Cultural</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">🎭 $100-200/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">🏯 Japan</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 14 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Cultural Immersion in Japan: Traditional Experiences and Modern Wonders</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Experience authentic Japanese culture through traditional ryokans, tea ceremonies, and temple visits while exploring modern Tokyo.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="David Culture" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">David Culture</span>
          </div>
          <span class="text-sm text-gray-500">Dec 12, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/cultural-immersion-japan-traditional-modern" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>

    <!-- Article 5 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1570077188670-e3a8d69ac5ff?w=800&h=600&fit=crop" alt="Greek Islands" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium">Island Hopping</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">🏖️ $80-150/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">🏰 Greece</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 13 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Mediterranean Island Hopping: Greece's Most Beautiful Islands</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Discover the stunning Greek islands with this comprehensive island-hopping guide covering Santorini, Mykonos, Crete, and hidden gems.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face" alt="Sophia Islands" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">Sophia Islands</span>
          </div>
          <span class="text-sm text-gray-500">Dec 11, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/mediterranean-island-hopping-greece-beautiful-islands" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>

    <!-- Article 6 -->
    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="relative">
        <img src="https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?w=800&h=600&fit=crop" alt="Adventure Travel" class="w-full h-48 object-cover">
        <div class="absolute top-4 left-4">
          <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium">Adventure</span>
        </div>
        <div class="absolute top-4 right-4">
          <span class="bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium">🎒 $40-120/day</span>
        </div>
      </div>
      <div class="p-6">
        <div class="flex items-center space-x-2 mb-3">
          <span class="text-sm text-gray-600">🗽 Patagonia</span>
          <span class="text-gray-400">•</span>
          <span class="text-sm text-gray-600">⏱️ 16 min read</span>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">Trekking Through Patagonia: Epic Adventure in South America</h3>
        <p class="text-gray-600 mb-4 line-clamp-3">Experience the raw beauty of Patagonia with this comprehensive trekking guide covering Torres del Paine and Fitz Roy circuits.</p>
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face" alt="Sarah Adventure" class="w-8 h-8 rounded-full">
            <span class="text-sm text-gray-700">Sarah Adventure</span>
          </div>
          <span class="text-sm text-gray-500">Dec 10, 2024</span>
        </div>
        <div class="mt-4">
          <a href="/post/trekking-patagonia-epic-adventure-south-america" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            Read More <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </a>
        </div>
      </div>
    </article>
  </div>

  <!-- Pagination -->
  <div class="flex justify-center mt-12">
    <nav id="posts-pagination" class="flex items-center space-x-2 hidden">
      <button class="px-3 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50" disabled>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
      </button>
      <button class="px-4 py-2 bg-blue-600 text-white rounded-lg font-medium">1</button>
      <button class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">2</button>
      <button class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">3</button>
      <span class="px-3 py-2 text-gray-500">...</span>
      <button class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">8</button>
      <button class="px-3 py-2 text-gray-700 hover:text-gray-900">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
      </button>
    </nav>
  </div>
</main>

<script>
(function(){
  const LIMIT = 9; let currentPage=1, totalPages=1;
  const loadEl=document.getElementById('posts-loading');
  const errEl=document.getElementById('posts-error');
  const emptyEl=document.getElementById('posts-empty');
  const gridEl=document.getElementById('posts-grid');
  const pagEl=document.getElementById('posts-pagination');

  const fallbackImg="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23f3f4f6'/%3E%3Ctext x='200' y='100' text-anchor='middle' dy='0.3em' font-family='Arial' font-size='16' fill='%23666'%3ENo Image%3C/text%3E%3C/svg%3E";

  function card(p){
    const img=p.featured_image||fallbackImg;
    return `<article class='bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow'>\n      <div class='relative'>\n        <img src='${img}' alt='${p.title}' class='w-full h-48 object-cover'>\n        ${p.category?`<div class='absolute top-4 left-4'><span class='bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium'>${p.category}</span></div>`:''}\n        ${p.budget?`<div class='absolute top-4 right-4'><span class='bg-white/90 text-gray-700 px-2 py-1 rounded text-sm font-medium'>${p.budget}</span></div>`:''}\n      </div>\n      <div class='p-6'>\n        <div class='flex items-center space-x-2 mb-3'>\n          ${p.location?`<span class='text-sm text-gray-600'>${p.location}</span><span class='text-gray-400'>•</span>`:''}\n          <span class='text-sm text-gray-600'>⏱️ ${p.read_time||5} min read</span>\n        </div>\n        <h3 class='text-xl font-bold text-gray-900 mb-2 line-clamp-2'>${p.title}</h3>\n        <p class='text-gray-600 mb-4 line-clamp-3'>${p.excerpt||''}</p>\n        <div class='flex items-center justify-between'>\n          <div class='flex items-center space-x-2'>\n            <img src='${p.author_avatar||"/images/default-avatar.png"}' class='w-8 h-8 rounded-full' alt='${p.author}'>\n            <span class='text-sm text-gray-700'>${p.author||''}</span>\n          </div>\n          <span class='text-sm text-gray-500'>${new Date(p.published_at).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'})}</span>\n        </div>\n        <div class='mt-4'>\n          <a href='/post/${p.slug}' class='inline-flex items-center text-blue-600 hover:text-blue-700 font-medium'>Read More <svg class='w-4 h-4 ml-1' fill='none' stroke='currentColor' viewBox='0 0 24 24'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5l7 7-7 7'></path></svg></a>\n        </div>\n      </div>\n    </article>`;
  }

  function buildPagination(){
    if(totalPages<=1){pagEl.classList.add('hidden');return;}
    let html=`<button ${currentPage===1?'disabled':''} data-page='prev' class='px-3 py-2 text-gray-500 hover:text-blue-600 disabled:opacity-40'>&laquo;</button>`;
    for(let i=1;i<=totalPages;i++){
      html+=`<button data-page='${i}' class='px-4 py-2 ${i===currentPage?'bg-blue-600 text-white':'text-gray-700 hover:bg-gray-100'} rounded-lg'>${i}</button>`;
    }
    html+=`<button ${currentPage===totalPages?'disabled':''} data-page='next' class='px-3 py-2 text-gray-500 hover:text-blue-600 disabled:opacity-40'>&raquo;</button>`;
    pagEl.innerHTML=html;
    pagEl.classList.remove('hidden');
    pagEl.querySelectorAll('button').forEach(b=>b.addEventListener('click',e=>{
      const v=e.currentTarget.dataset.page;
      if(v==='prev') load(currentPage-1);
      else if(v==='next') load(currentPage+1);
      else load(parseInt(v));
    }));
  }

  async function load(page=1){
    currentPage=page;
    loadEl.classList.remove('hidden');
    errEl.classList.add('hidden');
    emptyEl.classList.add('hidden');
    gridEl.classList.add('hidden');
    try{
      const res=await fetch(`/api/blog/posts?limit=${LIMIT}&page=${page}`);
      if(!res.ok) throw new Error();
      const data=await res.json();
      const posts=data.posts||data.data||[];
      totalPages=data.pagination?data.pagination.total_pages:1;
      if(!posts.length){
        emptyEl.classList.remove('hidden');
        buildPagination();
        return;
      }
      gridEl.innerHTML=posts.map(card).join('');
      gridEl.classList.remove('hidden');
      buildPagination();
    }catch(e){
      console.error(e);
      errEl.classList.remove('hidden');
    }finally{
      loadEl.classList.add('hidden');
    }
  }

  document.addEventListener('DOMContentLoaded',()=>{
    gridEl.innerHTML='';
    load();
  });
})();
</script>