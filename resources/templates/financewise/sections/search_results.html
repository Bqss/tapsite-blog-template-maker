<!-- Search Header -->
<header class="bg-white py-16">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h1 class="font-display text-4xl lg:text-5xl font-bold text-finance-dark mb-6">
      Cari Artikel Keuangan
    </h1>
    <p class="text-xl text-gray-600 mb-8">
      Temukan panduan investasi, tips keuangan, dan strategi wealth building
    </p>

    <!-- Search Form -->
    <div class="relative max-w-2xl mx-auto">
      <input id="search-input" type="text" placeholder="Cari artikel tentang investasi, keuangan, atau strategi..."
        class="w-full px-6 py-4 pl-12 pr-20 rounded-2xl border-2 border-gray-200 focus:border-finance-blue focus:outline-none text-lg"
        value="">
      <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400" fill="none"
        stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <button
        class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-finance-blue text-white px-6 py-2 rounded-xl font-medium hover:bg-finance-navy transition-colors">
        Cari
      </button>
    </div>
  </div>
</header>

<!-- Search Results -->
<section class="py-16 bg-white">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Search Info -->
    <div class="flex items-center justify-between mb-8">
      <div>
        <h2 class="text-2xl font-bold text-finance-dark mb-2">Hasil Pencarian</h2>
        <p id="results-info" class="text-gray-600">Menampilkan 0 hasil untuk "<span class="font-medium text-finance-blue"></span>"</p>
      </div>
      <div class="flex items-center space-x-4">
        <select class="px-4 py-2 rounded-lg border border-gray-300 focus:border-finance-blue focus:outline-none">
          <option>Terbaru</option>
          <option>Terpopuler</option>
          <option>Terlama</option>
        </select>
      </div>
    </div>

    <!-- Search Results List -->
    <div id="search-results-list" class="space-y-6">
      <!-- Result 1 -->
      <article
        class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300">
        <div class="md:flex">
          <div class="md:w-1/3">
            <img src="https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop"
              alt="Index Fund Guide" class="w-full h-48 md:h-full object-cover">
          </div>
          <div class="md:w-2/3 p-6">
            <div class="flex items-center space-x-2 mb-3">
              <span class="bg-finance-blue text-white px-3 py-1 rounded-full text-sm font-medium">Investment</span>
              <span class="text-gray-500 text-sm">•</span>
              <span class="text-gray-500 text-sm">15 Des 2024</span>
            </div>
            <h3 class="font-display text-xl font-bold text-finance-dark mb-3">
              Panduan Lengkap Investasi <mark class="bg-yellow-200 px-1">Index Fund</mark> untuk Pemula
            </h3>
            <p class="text-gray-600 mb-4">
              Pelajari cara memulai investasi <mark class="bg-yellow-200 px-1">index fund</mark> dengan strategi yang
              tepat, risiko rendah, dan potensi keuntungan jangka panjang yang stabil untuk pemula.
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4 text-sm text-gray-500">
                <span>Sarah Financial</span>
                <span>•</span>
                <span>15 min read</span>
                <span>•</span>
                <span>2,847 views</span>
              </div>
              <button class="text-finance-blue font-medium hover:text-finance-navy transition-colors">
                Baca Artikel →
              </button>
            </div>
          </div>
        </div>
      </article>

      <!-- Result 2 -->
      <article
        class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300">
        <div class="md:flex">
          <div class="md:w-1/3">
            <img src="https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?w=400&h=250&fit=crop"
              alt="ETF vs Index Fund" class="w-full h-48 md:h-full object-cover">
          </div>
          <div class="md:w-2/3 p-6">
            <div class="flex items-center space-x-2 mb-3">
              <span class="bg-finance-blue text-white px-3 py-1 rounded-full text-sm font-medium">Investment</span>
              <span class="text-gray-500 text-sm">•</span>
              <span class="text-gray-500 text-sm">12 Des 2024</span>
            </div>
            <h3 class="font-display text-xl font-bold text-finance-dark mb-3">
              ETF vs <mark class="bg-yellow-200 px-1">Index Fund</mark>: Mana yang Lebih Baik?
            </h3>
            <p class="text-gray-600 mb-4">
              Perbandingan lengkap antara ETF dan <mark class="bg-yellow-200 px-1">index fund</mark> untuk membantu
              investor pemula memilih instrumen investasi yang tepat sesuai kebutuhan.
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4 text-sm text-gray-500">
                <span>Mike Investment</span>
                <span>•</span>
                <span>12 min read</span>
                <span>•</span>
                <span>1,924 views</span>
              </div>
              <button class="text-finance-blue font-medium hover:text-finance-navy transition-colors">
                Baca Artikel →
              </button>
            </div>
          </div>
        </div>
      </article>

      <!-- Result 3 -->
      <article
        class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300">
        <div class="md:flex">
          <div class="md:w-1/3">
            <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=400&h=250&fit=crop"
              alt="Index Fund Performance" class="w-full h-48 md:h-full object-cover">
          </div>
          <div class="md:w-2/3 p-6">
            <div class="flex items-center space-x-2 mb-3">
              <span class="bg-finance-blue text-white px-3 py-1 rounded-full text-sm font-medium">Investment</span>
              <span class="text-gray-500 text-sm">•</span>
              <span class="text-gray-500 text-sm">10 Des 2024</span>
            </div>
            <h3 class="font-display text-xl font-bold text-finance-dark mb-3">
              Kinerja <mark class="bg-yellow-200 px-1">Index Fund</mark> Indonesia vs Global
            </h3>
            <p class="text-gray-600 mb-4">
              Analisis perbandingan kinerja <mark class="bg-yellow-200 px-1">index fund</mark> Indonesia dengan global
              untuk membantu diversifikasi portofolio investasi yang optimal.
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4 text-sm text-gray-500">
                <span>Dr. Portfolio</span>
                <span>•</span>
                <span>18 min read</span>
                <span>•</span>
                <span>1,567 views</span>
              </div>
              <button class="text-finance-blue font-medium hover:text-finance-navy transition-colors">
                Baca Artikel →
              </button>
            </div>
          </div>
        </div>
      </article>

      <!-- Result 4 -->
      <article
        class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300">
        <div class="md:flex">
          <div class="md:w-1/3">
            <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=250&fit=crop"
              alt="Index Fund Strategy" class="w-full h-48 md:h-full object-cover">
          </div>
          <div class="md:w-2/3 p-6">
            <div class="flex items-center space-x-2 mb-3">
              <span class="bg-finance-blue text-white px-3 py-1 rounded-full text-sm font-medium">Investment</span>
              <span class="text-gray-500 text-sm">•</span>
              <span class="text-gray-500 text-sm">8 Des 2024</span>
            </div>
            <h3 class="font-display text-xl font-bold text-finance-dark mb-3">
              Strategi Dollar Cost Averaging untuk <mark class="bg-yellow-200 px-1">Index Fund</mark>
            </h3>
            <p class="text-gray-600 mb-4">
              Cara menerapkan strategi dollar cost averaging dalam investasi <mark class="bg-yellow-200 px-1">index
                fund</mark> untuk mengurangi risiko volatilitas pasar.
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4 text-sm text-gray-500">
                <span>Strategy Expert</span>
                <span>•</span>
                <span>14 min read</span>
                <span>•</span>
                <span>2,156 views</span>
              </div>
              <button class="text-finance-blue font-medium hover:text-finance-navy transition-colors">
                Baca Artikel →
              </button>
            </div>
          </div>
        </div>
      </article>
    </div>

    <!-- Pagination -->
    <div class="flex justify-center mt-12">
      <div class="flex items-center space-x-2">
        <button class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 transition-colors">
          Previous
        </button>
        <button class="px-4 py-2 rounded-lg bg-finance-blue text-white font-medium">1</button>
        <button
          class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 transition-colors">2</button>
        <button
          class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 transition-colors">3</button>
        <button class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 transition-colors">
          Next
        </button>
      </div>
    </div>
  </div>
</section>
<script>
  document.addEventListener('DOMContentLoaded', async () => {
    const parts = window.location.pathname.split('/');
    const query = decodeURIComponent(parts[parts.length - 1] || parts[parts.length - 2]);

    // update input value
    const inputEl = document.getElementById('search-input');
    if (inputEl) inputEl.value = query;

    const infoEl = document.getElementById('results-info');
    const grid = document.getElementById('search-results-list');
    grid.innerHTML = '<p class="text-center text-gray-500">Loading...</p>';

    try {
      const res = await fetch(`/api/blog/posts/search/${encodeURIComponent(query)}`);
      if (!res.ok) throw new Error('Failed');
      const data = await res.json();
      if (!Array.isArray(data) || data.length === 0) {
        grid.innerHTML = '<p class="text-center text-gray-500">No results found.</p>';
        if (infoEl) infoEl.innerHTML = `Menampilkan 0 hasil untuk "<span class='font-medium text-finance-blue'>${query}</span>"`;
        return;
      }
      if (infoEl) infoEl.innerHTML = `Menampilkan ${data.length} hasil untuk "<span class='font-medium text-finance-blue'>${query}</span>"`;
      grid.innerHTML = data.map(post => `
        <article class=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300\">
          <div class=\"md:flex\">
            <div class=\"md:w-1/3\">
              <img src=\"${post.featured_image || ''}\" alt=\"${post.title}\" class=\"w-full h-48 md:h-full object-cover\">
            </div>
            <div class=\"md:w-2/3 p-6\">
              <div class=\"flex items-center space-x-2 mb-3\">
                <span class=\"bg-finance-blue text-white px-3 py-1 rounded-full text-sm font-medium\">${post.category}</span>
                <span class=\"text-gray-500 text-sm\">•</span>
                <span class=\"text-gray-500 text-sm\">${new Date(post.published_at).toLocaleDateString()}</span>
              </div>
              <h3 class=\"font-display text-xl font-bold text-finance-dark mb-3 line-clamp-2\">${post.title}</h3>
              <p class=\"text-gray-600 mb-4 line-clamp-3\">${post.excerpt}</p>
              <div class=\"flex items-center justify-between\">
                <div class=\"flex items-center space-x-4 text-sm text-gray-500\">
                  <span>${post.author}</span>
                  <span>•</span>
                  <span>${post.read_time} min read</span>
                  <span>•</span>
                  <span>${post.view_count || 0} views</span>
                </div>
                <a href=\"/post/${post.slug}\" class=\"text-finance-blue font-medium hover:text-finance-navy transition-colors\">Baca Artikel →</a>
              </div>
            </div>
          </div>
        </article>
      `).join('');
    } catch (err) {
      console.error(err);
      grid.innerHTML = '<p class="text-center text-red-500">Error loading search results.</p>';
    }
  });
</script>