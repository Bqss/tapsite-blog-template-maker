<!-- Featured Luxury Article -->
<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="luxury-gradient rounded-3xl p-12 md:p-16 text-white relative overflow-hidden">
      <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"></div>
      <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"></div>

      <div class="grid lg:grid-cols-2 gap-16 items-center relative z-10">
        <div>
          <div class="flex items-center space-x-3 mb-6">
            <div class="bg-white/20 backdrop-blur-sm text-white text-sm px-4 py-2 rounded-full border border-white/30">
              FEATURED LUXURY
            </div>
            <div class="flex items-center space-x-1">
              <span class="text-white/90 text-sm">By</span>
              <span class="text-white font-medium">Luxury Editor</span>
            </div>
          </div>
          <h2 class="text-4xl md:text-5xl font-bold font-serif mb-6 leading-tight">
            <a href="/post/milan-fashion-week-2024-trends" class="hover:text-white/90 transition-colors">
              Milan Fashion Week 2024: The Future of Luxury Fashion
            </a>
          </h2>
          <p class="text-xl text-white/90 mb-8 leading-relaxed">
            From Versace's stunning metallics to Prada's minimalist revolution, discover the trends that will define
            luxury fashion for the next decade. Exclusive backstage insights and runway analysis.
          </p>
          <div class="flex items-center space-x-8 mb-8">
            <div class="flex items-center space-x-2">
              <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                <span class="text-white font-bold">LE</span>
              </div>
              <div>
                <div class="text-white font-semibold">Luxury Editor</div>
                <div class="text-white/70 text-sm">Fashion Authority</div>
              </div>
            </div>
            <div class="flex items-center space-x-6 text-white/70">
              <span>15 min read</span>
              <span>8,439 views</span>
            </div>
          </div>
          <a href="/post/milan-fashion-week-2024-trends"
            class="inline-flex items-center bg-white text-luxury-gold hover:bg-white/90 px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg">
            <span>Read Exclusive Report</span>
            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
        <div class="relative">
          <div
            class="aspect-square bg-white/10 rounded-3xl backdrop-blur-sm flex items-center justify-center border border-white/20">
            <div class="text-center">
              <div class="text-8xl mb-4">üëë</div>
              <div class="text-white font-bold text-xl">LUXURY FASHION</div>
              <div class="text-white/70">Milan Fashion Week</div>
            </div>
          </div>
          <div
            class="absolute -top-4 -right-4 w-16 h-16 bg-white/20 rounded-full flex items-center justify-center border border-white/30">
            <span class="text-white text-2xl">‚ú®</span>
          </div>
          <div
            class="absolute -bottom-4 -left-4 w-12 h-12 bg-white/20 rounded-full flex items-center justify-center border border-white/30">
            <span class="text-white">üíé</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Latest Luxury Content -->
<section class="py-20 bg-luxury-cream">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-5xl font-bold font-serif luxury-text-gradient mb-4">Latest Luxury</h2>
      <p class="text-gray-600 text-xl">Curated content for the discerning lifestyle connoisseur</p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
      <article
        class="bg-white rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all transform hover:-translate-y-2 luxury-hover">
        <div class="aspect-[4/3] bg-gradient-to-br from-luxury-gold/20 to-luxury-accent/20 relative">
          <div
            class="absolute top-6 left-6 bg-luxury-gold text-white text-xs px-4 py-2 rounded-full font-bold uppercase tracking-wide">
            High Fashion
          </div>
          <div
            class="absolute bottom-6 right-6 bg-white/90 backdrop-blur-sm text-luxury-dark px-4 py-2 rounded-full text-sm font-medium">
            üëó Couture
          </div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
              <div class="text-6xl mb-4">üíé</div>
              <div class="text-luxury-gold font-bold">EXCLUSIVE</div>
            </div>
          </div>
        </div>
        <div class="p-8">
          <h3 class="text-2xl font-bold font-serif text-luxury-dark mb-4">
            <a href="/post/chanel-haute-couture-2024" class="hover:text-luxury-gold transition-colors">
              Chanel Haute Couture: Timeless Elegance Reimagined
            </a>
          </h3>
          <p class="text-gray-600 mb-6 leading-relaxed">
            Step into the world of Chanel's latest haute couture collection, where tradition meets innovation in
            breathtaking handcrafted pieces.
          </p>
          <div class="flex items-center justify-between text-sm text-gray-500 mb-6">
            <div class="flex items-center space-x-2">
              <div class="w-8 h-8 bg-luxury-gold rounded-full flex items-center justify-center">
                <span class="text-white text-xs font-bold">CE</span>
              </div>
              <span>Couture Expert</span>
            </div>
            <span>12 min read</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">March 18, 2024</span>
            <span class="text-sm luxury-text-gradient font-medium">5,847 views</span>
          </div>
        </div>
      </article>

      <article
        class="bg-white rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all transform hover:-translate-y-2 luxury-hover">
        <div class="aspect-[4/3] bg-gradient-to-br from-blue-400/20 to-teal-400/20 relative">
          <div
            class="absolute top-6 left-6 bg-blue-600 text-white text-xs px-4 py-2 rounded-full font-bold uppercase tracking-wide">
            Luxury Travel
          </div>
          <div
            class="absolute bottom-6 right-6 bg-white/90 backdrop-blur-sm text-luxury-dark px-4 py-2 rounded-full text-sm font-medium">
            ‚úàÔ∏è Private Jet
          </div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
              <div class="text-6xl mb-4">üèñÔ∏è</div>
              <div class="text-blue-600 font-bold">PARADISE</div>
            </div>
          </div>
        </div>
        <div class="p-8">
          <h3 class="text-2xl font-bold font-serif text-luxury-dark mb-4">
            <a href="/post/maldives-luxury-resort-review" class="hover:text-luxury-gold transition-colors">
              Maldives Luxury: The Ultimate Private Island Experience
            </a>
          </h3>
          <p class="text-gray-600 mb-6 leading-relaxed">
            Discover the epitome of luxury hospitality at the Maldives' most exclusive private island resort, where
            paradise meets perfection.
          </p>
          <div class="flex items-center justify-between text-sm text-gray-500 mb-6">
            <div class="flex items-center space-x-2">
              <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                <span class="text-white text-xs font-bold">TC</span>
              </div>
              <span>Travel Curator</span>
            </div>
            <span>20 min read</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">March 15, 2024</span>
            <span class="text-sm luxury-text-gradient font-medium">12,293 views</span>
          </div>
        </div>
      </article>

      <article
        class="bg-white rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all transform hover:-translate-y-2 luxury-hover">
        <div class="aspect-[4/3] bg-gradient-to-br from-purple-400/20 to-pink-400/20 relative">
          <div
            class="absolute top-6 left-6 bg-purple-600 text-white text-xs px-4 py-2 rounded-full font-bold uppercase tracking-wide">
            Fine Living
          </div>
          <div
            class="absolute bottom-6 right-6 bg-white/90 backdrop-blur-sm text-luxury-dark px-4 py-2 rounded-full text-sm font-medium">
            üç∑ Vintage
          </div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
              <div class="text-6xl mb-4">ü•Ç</div>
              <div class="text-purple-600 font-bold">VINTAGE</div>
            </div>
          </div>
        </div>
        <div class="p-8">
          <h3 class="text-2xl font-bold font-serif text-luxury-dark mb-4">
            <a href="/post/champagne-collection-guide" class="hover:text-luxury-gold transition-colors">
              Building the Perfect Champagne Collection
            </a>
          </h3>
          <p class="text-gray-600 mb-6 leading-relaxed">
            Master the art of champagne collecting with our expert guide to vintage bottles, investment pieces, and
            tasting notes from renowned sommeliers.
          </p>
          <div class="flex items-center justify-between text-sm text-gray-500 mb-6">
            <div class="flex items-center space-x-2">
              <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                <span class="text-white text-xs font-bold">WS</span>
              </div>
              <span>Wine Sommelier</span>
            </div>
            <span>18 min read</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">March 12, 2024</span>
            <span class="text-sm luxury-text-gradient font-medium">7,162 views</span>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- Luxury Categories -->
<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-5xl font-bold font-serif luxury-text-gradient mb-4">Luxury Categories</h2>
      <p class="text-gray-600 text-xl">Explore the finest in luxury lifestyle</p>
    </div>

    <div id="lux-categories-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8">
      <!-- dynamic categories will be injected here -->
    </div>
  </div>
</section>

<script>
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', function () {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    if (mobileMenuBtn && mobileMenu) {
      mobileMenuBtn.addEventListener('click', function () {
        mobileMenu.classList.toggle('hidden');
      });
    }
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

  // Intersection Observer for luxury animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-fade-in');
      }
    });
  }, observerOptions);

  // Observe luxury cards
  document.querySelectorAll('.luxury-card').forEach(card => {
    observer.observe(card);
  });

  // Luxury hover effects
  document.querySelectorAll('.luxury-hover').forEach(element => {
    element.addEventListener('mouseenter', function () {
      this.style.transform = 'translateY(-8px)';
      this.style.boxShadow = '0 25px 50px rgba(212, 175, 55, 0.2)';
    });

    element.addEventListener('mouseleave', function () {
      this.style.transform = 'translateY(0)';
      this.style.boxShadow = '';
    });
  });

  /* Dynamic Featured & Latest Luxury Posts */
  (function () {
    const featuredGradient = document.querySelector('.luxury-gradient');
    const featuredWrapper = featuredGradient ? featuredGradient.parentElement.parentElement : null;
    const latestGrid = document.querySelector('section.bg-luxury-cream .grid');

    if (!featuredWrapper || !latestGrid) return;

    const loading = document.createElement('div');
    loading.className = 'py-12 text-center';
    loading.innerHTML = `<div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-luxury-gold border-t-transparent"></div><p class="mt-4 text-gray-500">Loading luxury articles...</p>`;
    featuredWrapper.replaceWith(loading);
    latestGrid.innerHTML = '';

    fetch('/api/blog/posts/recent?limit=7')
      .then(r => r.json())
      .then(res => {
        const posts = Array.isArray(res) ? res : (res.posts || []);
        if (!posts.length) throw new Error('empty');

        const [featured, ...latest] = posts;
        loading.replaceWith(createFeaturedNode(featured));
        latest.forEach(p => latestGrid.insertAdjacentHTML('beforeend', createLatestHTML(p)));

        // Reapply hover effect to new nodes
        latestGrid.querySelectorAll('.luxury-hover').forEach(el => {
          el.addEventListener('mouseenter', () => {
            el.style.transform = 'translateY(-8px)';
            el.style.boxShadow = '0 25px 50px rgba(212, 175, 55, 0.2)';
          });
          el.addEventListener('mouseleave', () => {
            el.style.transform = 'translateY(0)';
            el.style.boxShadow = '';
          });
        });
      })
      .catch(err => {
        console.error(err);
        loading.innerHTML = '<p class="text-red-500">Failed to load luxury articles.</p>';
      });

    function initials(name = '') {
      return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
    }

    function createFeaturedNode(article) {
      const div = document.createElement('div');
      div.innerHTML = createFeaturedHTML(article).trim();
      return div.firstElementChild;
    }

    function createFeaturedHTML(a) {
      const views = a.view_count || a.views || 0;
      const read = a.read_time || 5;
      const img = a.featured_image || '';
      return `
        <div class="luxury-gradient rounded-3xl p-12 md:p-16 text-white relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"></div>
          <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"></div>
          <div class="grid lg:grid-cols-2 gap-16 items-center relative z-10">
            <div>
              <div class="flex items-center space-x-3 mb-6">
                <div class="bg-white/20 backdrop-blur-sm text-white text-sm px-4 py-2 rounded-full border border-white/30">FEATURED LUXURY</div>
                <div class="flex items-center space-x-1"><span class="text-white/90 text-sm">By</span><span class="text-white font-medium">${a.author || 'Luxury Editor'}</span></div>
              </div>
              <h2 class="text-4xl md:text-5xl font-bold font-serif mb-6 leading-tight"><a href="/post/${a.slug}" class="hover:text-white/90 transition-colors">${a.title}</a></h2>
              <p class="text-xl text-white/90 mb-8 leading-relaxed">${a.excerpt || ''}</p>
              <div class="flex items-center space-x-8 mb-8">
                <div class="flex items-center space-x-2"><div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"><span class="text-white font-bold">${initials(a.author || '')}</span></div><div><div class="text-white font-semibold">${a.author || ''}</div></div></div>
                <div class="flex items-center space-x-6 text-white/70"><span>${read} min read</span>${views ? `<span>${views} views</span>` : ''}</div>
              </div>
              <a href="/post/${a.slug}" class="inline-flex items-center bg-white text-luxury-gold hover:bg-white/90 px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg"><span>Read Exclusive Report</span><svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></a>
            </div>
            <div class="relative"><img src="${img}" alt="${a.title}" class="rounded-3xl object-cover w-full h-full" /></div>
          </div>
        </div>`;
    }

    function createLatestHTML(a) {
      const views = a.view_count || a.views || 0;
      const read = a.read_time || 5;
      const img = a.featured_image || '';
      const published = new Date(a.published_at || Date.now()).toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });
      const cat = a.category || 'Luxury';
      return `
        <article class="bg-white rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all transform hover:-translate-y-2 luxury-hover">
          <div class="aspect-[4/3] bg-gradient-to-br from-luxury-gold/20 to-luxury-accent/20 relative">
            ${img ? `<img src="${img}" alt="${a.title}" class="absolute inset-0 w-full h-full object-cover rounded-3xl" />` : ''}
            <div class="absolute top-6 left-6 bg-luxury-gold text-white text-xs px-4 py-2 rounded-full font-bold uppercase tracking-wide">${cat}</div>
          </div>
          <div class="p-8">
            <h3 class="text-2xl font-bold font-serif text-luxury-dark mb-4"><a href="/post/${a.slug}" class="hover:text-luxury-gold transition-colors">${a.title}</a></h3>
            <p class="text-gray-600 mb-6 leading-relaxed">${a.excerpt || ''}</p>
            <div class="flex items-center justify-between text-sm text-gray-500 mb-6"><div class="flex items-center space-x-2"><div class="w-8 h-8 bg-luxury-gold rounded-full flex items-center justify-center"><span class="text-white text-xs font-bold">${initials(a.author || '')}</span></div><span>${a.author}</span></div><span>${read} min read</span></div>
            <div class="flex items-center justify-between"><span class="text-sm text-gray-500">${published}</span>${views ? `<span class="text-sm luxury-text-gradient font-medium">${views} views</span>` : ''}</div>
          </div>
        </article>`;
    }
  })();

  (function(){
    const catGrid=document.getElementById('lux-categories-grid');
    if(!catGrid) return;
    catGrid.innerHTML='';

    const icons=['üëë','‚úàÔ∏è','üç∑','‚åö','üèéÔ∏è','üè∞','üíé','üõãÔ∏è','üçΩÔ∏è','üèùÔ∏è'];
    fetch('/api/blog/categories')
      .then(r=>r.json())
      .then(list=>{
        (list||[]).slice(0,6).forEach((c,idx)=>{
          const icon=icons[idx%icons.length];
          catGrid.insertAdjacentHTML('beforeend',`
            <a href="/category/${encodeURIComponent(c.name.toLowerCase().replace(/\s+/g,'-'))}" class="group cursor-pointer">
              <div class="luxury-card p-8 rounded-3xl text-center group-hover:scale-105 transition-transform">
                <div class="text-5xl mb-4">${icon}</div>
                <h3 class="font-bold text-luxury-dark mb-2">${c.name}</h3>
                <p class="text-gray-600 text-sm">${c.description?.split(' ')[0]||''}</p>
              </div>
            </a>`);
        });
      })
      .catch(err=>{console.error(err);catGrid.innerHTML='<p class="text-center col-span-full text-gray-500">Failed to load categories.</p>';});
  })();
</script>