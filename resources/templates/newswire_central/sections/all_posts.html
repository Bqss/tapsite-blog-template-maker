<!-- All News Posts Section -->
<section class="py-16 bg-news-gray">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-900 mb-4 font-serif">All News Articles</h2>
      <p class="text-gray-600">Latest reports and in-depth analyses</p>
    </div>

    <!-- Loading -->
    <div id="news-loading" class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-news-blue"></div></div>
    <div id="news-error" class="text-center py-12 hidden text-news-red font-medium">Failed to load news.</div>

    <!-- Grid -->
    <div id="news-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 hidden"></div>
    <div id="news-pagination" class="mt-12 flex justify-center hidden space-x-2"></div>
  </div>
</section>
<script>
(function(){
  const API='/api/blog/posts';const PER=6;let page=1,pages=1,data=[];
  const l=document.getElementById('news-loading');const e=document.getElementById('news-error');const g=document.getElementById('news-grid');const p=document.getElementById('news-pagination');
  const st=s=>{l.classList.toggle('hidden',s!=='loading');e.classList.toggle('hidden',s!=='error');g.classList.toggle('hidden',s!=='grid');p.classList.toggle('hidden',s!=='grid');};
  const trunc=(t,l=140)=>t.length<=l?t:t.slice(0,l)+'…';
  const card=o=>`<article class=\"headline-card bg-white rounded-lg overflow-hidden shadow hover:shadow-lg transition-shadow\"><a href=\"/post/${o.slug}\"><img src=\"${o.featured_image||'/placeholder.webp'}\" alt=\"${o.title}\" class=\"w-full h-48 object-cover\"></a><div class=\"p-4 space-y-2\"><div class=\"flex items-center text-xs text-gray-500 space-x-2\"><span class=\"font-medium text-news-blue\">${o.category}</span><span>•</span><span>${new Date(o.published_at).toLocaleDateString()}</span></div><h3 class=\"text-xl font-bold hover:text-news-red transition-colors line-clamp-2\"><a href=\"/post/${o.slug}\">${o.title}</a></h3><p class=\"text-gray-600 line-clamp-2\">${trunc(o.excerpt||o.content||'')}</p></div></article>`;
  async function fetchData(pg=1){st('loading');try{const r=await fetch(`${API}?page=${pg}&limit=${PER}`);if(!r.ok)throw Error();const j=await r.json();data=j.data;pages=j.total_pages||1;render();}catch(err){st('error');}}
  function render(){g.innerHTML=data.map(card).join('');renderPag();st('grid');}
  function renderPag(){p.innerHTML='';if(pages<=1)return;for(let i=1;i<=pages;i++){const b=document.createElement('button');b.textContent=i;b.className=`px-4 py-2 rounded-full ${i===page?'bg-news-blue text-white':'bg-white text-gray-700 border'} hover:bg-news-blue hover:text-white transition-colors`;b.onclick=()=>{page=i;fetchData(i)};p.appendChild(b);} }
  fetchData(page);
})();
</script> 